Week 349
========

We were back to working on [Smart Answers][smart-answers] after our week off to work with [Hookline][hookline]. I think the break helped and I came back feeling refreshed and motivated.

We followed our regular pattern of working on Smart Answers from Monday to Thursday, and on GFR on Friday.


## Smart Answers

### Part Year Profit for Tax Credits

I continued to respond to HMRC's feedback about this new Smart Answer during the week. We finished the week with just a couple of minor text changes required before it could go live!

### Converting questions to use ERB

[James][james-mead] investigated switching questions to use ERB templates. As a first step he [extended our regression tests so that they stored questions][pr-1954] as well as the outcomes and landing pages. He also spent some time [refactoring the `NodePresenter`][pr-1962] so that it's going to be easier to make changes to how we store the questions in future.

### Erroneous events in Google Analytics

I investigated some erroneous Smart Answer "Completed" events that were appearing in Google Analytics. These events are fired when someone reaches an outcome of a Smart Answer (i.e. they've reached the end) so it was slightly worrying that we had some events being registered against Smart Answer start pages. Google Analytics revealed that the majority of these events were being generated by version 4 of the Android Browser. I'm fairly confident that the problem is caused by our use of `pushState` to update the browser history while navigating Smart Answers. According to the "Can I use?" website [version 4 of the Android Browser doesn't support `pushState`][can-i-use-pushstate]. I was really hoping to be able to confirm this by using an Android emulator but I couldn't get any of them to work reliably on my laptop. Fortunately, our Smart Answers analyst was happy with the explanation so we're able to leave this for now.

### Handover

James and I spent a couple of hours discussing our priorities with [David][david-singleton] and [Jenny][jenny-duckett], whose team will be responsible for Smart Answers when we leave. We went through Trello and tried to prioritise the stories we'd already created, as well as adding new ones where appropriate. One of the outcomes of this chat was that we need to spend some of our time focussing on documentation to help future Smart Answer developers.

I made a first step toward improving the documentation by [reorganising the content from three large READMEs into smaller more focussed documents][pr-1959]. This should hopefully make it easier to make some of the other changes that we're planning.

### Other changes

I [simplified the date question][pr-1935]. These are the sort of changes we feel more comfortable making now that we're really familiar with the codebase.

I started adding support for [graphing Smart Answers that don't use the `next_node` predicates][pr-1960].

James [fixed the data we were sending to Rummager][pr-1955] after noticing that we'd inadvertently broken this when switching from YAML to ERB for templates.

We noticed a problem with our deployments in that the release tags we deploy now contain merge commits from [Jenkins][jenkins-ci]. We haven't got to the bottom of this yet.

### Tijmen and Finding Things

[Tijmen][tijmen-brommet] made a [number of changes to Smart Answers during the week][tijmen-prs]. He was adding functionality to send Smart Answers to the [content store][content-store] and tidied up some of the existing code in the process. Thanks, Tijmen!

### Tara Tadas

James and I spent some time with [Tadas][tadas-tamosauskas] on Thursday to get an update on what he'd been working on. He's off on holiday next week and is going to be working on a different team when he returns!

It turns out that Tadas worked on quite a few of Smart Answers during the week including [Student finance calculator][student-finance-calculator], [State Pension top up calculator][state-pension-topup], [Overseas British passport applications][overseas-passports], [Maternity and paternity calculator for employers][maternity-paternity-calculator], [Statutory Sick Pay (SSP)][statutory-sick-pay] and [Check if you need a UK visa][check-uk-visa]. Apparently it's the time of year that a number of rates or rules change which result in all these updates to Smart Answers.

## GFR

Friday was mostly admin and writing week notes although we did also manage to make time for a lunchtime pizza and beer in the sun with [Murray][murray-steele].

James did a great job of [writing up the week we spent with Hookline][week-348].

I spent an hour or so trying to understand [GitHub flow][github-flow] and whether the spaghetti of git branches you can end up with is actually worth worrying about.

James and I both made the switch to the [Atom text editor][atom-io] sometime during the week. We'd both tried it shortly after it was released and found it too slow but those problems appear to have been solved. It'll be interesting to see whether we both stick with it.

Until next time.

-- Chris

[atom-io]: https://atom.io/
[can-i-use-pushstate]: http://caniuse.com/#search=pushstate
[check-uk-visa]: https://www.gov.uk/check-uk-visa
[content-store]: https://github.com/alphagov/content-store
[david-singleton]: http://dsingleton.co.uk/
[github-flow]: https://guides.github.com/introduction/flow/
[hookline]: http://hookline.tv/
[james-mead]: /james-mead
[jenny-duckett]: https://twitter.com/jenny_duckett
[jenkins-ci]: http://jenkins-ci.org
[maternity-paternity-calculator]: https://www.gov.uk/maternity-paternity-calculator
[murray-steele]: https://twitter.com/#!/hlame
[overseas-passports]: https://www.gov.uk/overseas-passports
[pr-1935]: https://github.com/alphagov/smart-answers/pull/1935
[pr-1954]: https://github.com/alphagov/smart-answers/pull/1954
[pr-1955]: https://github.com/alphagov/smart-answers/pull/1955
[pr-1959]: https://github.com/alphagov/smart-answers/pull/1959
[pr-1960]: https://github.com/alphagov/smart-answers/pull/1960
[pr-1962]: https://github.com/alphagov/smart-answers/pull/1962
[smart-answers]: https://github.com/alphagov/smart-answers
[state-pension-topup]: https://www.gov.uk/state-pension-topup
[statutory-sick-pay]: https://www.gov.uk/statutory-sick-pay
[student-finance-calculator]: https://www.gov.uk/student-finance-calculator
[tadas-tamosauskas]: http://codeme.lt/
[tijmen-brommet]: http://www.tijmen.cc/
[tijmen-prs]: https://github.com/alphagov/smart-answers/pulls?utf8=%E2%9C%93&q=+is%3Apr+author%3Atijmenb+created%3A2015-09-21..2015-09-25
[week-348]: /week-348

:render_as: Blog
:kind: draft
:is_page: true
:written_with: Kramdown
:author: chris-roos
:created_at: 2015-10-02 11:30:00 +01:00
:updated_at: 2015-10-02 11:30:00 +01:00
:page_title: Week 349
