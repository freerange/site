<!DOCTYPE html>
<html lang='en'>
<head>
  <meta content="HTML Tidy for HTML5 for Mac OS X version 5.2.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width" name="viewport">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <link href="/stylesheets/screen.css" rel="stylesheet" title="screen" type="text/css">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel='alternate' title='Go Free Range Blog' type='application/atom+xml'>
  <script src='http://use.typekit.com/rny4upv.js' type='text/javascript'>
  </script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 375 — Go Free Range.</title>
</head>
<body class='blog'>
  <div id='page'>
    <div class='group' id='header'>
      <ul class='nav group' id='blog_nav'>
        <li id='link_home'>
          <p>Visit our <a href='/'>company website</a></p>
        </li>
        <li id='link_rss'>
          <p>Grab the <a href='http://feeds.gofreerange.com/GoFreeRangeBlog' title='RSS Feed from Feedburner'>RSS</a> feed</p>
        </li>
      </ul>
      <h1 id='logo'><a href='/blog' title='Go to blog index'>Blog index</a></h1>
    </div>
    <div class='group' id='content'>
      <div class='blog_entry group'>
        <p class='article_date'>Wednesday 27th April, 2016</p>
        <div class='author'>
          <img alt='Chris Roos' src='images/people/chris-roos.jpg'> <span>by Chris Roos</span>
        </div>
        <div class='content'>
          <h1 id="week-375">Week 375</h1>
          <h2 id="smart-answers">Smart Answers</h2>
          <p><a href="https://github.com/erikse">Erik</a> left the team this week. We’ve enjoyed working with Erik and wish him all the best for the future.</p>
          <h3 id="new-onresponse-block">New <code>on_response</code> block</h3>
          <ul>
            <li>
              <a href="https://github.com/alphagov/smart-answers/pull/2408">PR 2408 - Introduce on_response blocks to set attributes on calculator</a>. <a href="/james-mead">James</a> added this new method to allow us to consistently store question responses on an object associated with a Smart Answer. After getting favourable feedback from a spike in <a href="https://github.com/alphagov/smart-answers/pull/2405">PR 2405</a>, James reimplemented it and opened this PR.
            </li>
          </ul>
          <h3 id="rubocop">Rubocop</h3>
          <ul>
            <li>
              <a href="https://github.com/alphagov/smart-answers/pull/2418">PR 2418 - Use auto generated Rubocop config</a>. We were previously using <a href="https://github.com/alphagov/govuk-lint">govuk-lint-ruby</a> with the <code>--diff --cached</code> options to prevent us from violating Rubocop rules when changing or adding code. This PR switches us to using an <a href="https://github.com/bbatsov/rubocop#automatically-generated-configuration">automatically generated configuration file</a> to ignore existing violations. We plan to fix the ignored violations in future commits.
            </li>
          </ul>
          <h3 id="fixing-bugs">Fixing bugs</h3>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2391">PR 2391 - Restore indexable_content behaviour for outcome nodes</a>. While not serious, this behaviour has been “broken” for quite some time so it’s great to see it fixed.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2400">PR 2400 - Avoid double render error if exception raised after render</a>. James discovered this problem after Rubocop complained of some unused variables. It turns out to have been quite an edge case: the problem only occurs if an exception is raised after the response for a request has been rendered.</p>
            </li>
          </ul>
          <h3 id="documentation">Documentation</h3>
          <p>James made a couple of improvements to the Smart Answers documentation:</p>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2392">PR 2392 - Consistently use question mark suffix for question node keys in docs</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2393">PR 2393 - Documentation for the new-style testing approach</a>.</p>
            </li>
          </ul>
          <h3 id="removing-unused-code">Removing unused code</h3>
          <p>James did a bit of tidying by removing some unused code:</p>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2402">PR 2402 - Remove use_legacy_data option for country_select question</a></p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2403">PR 2403 - Remove unused FCOEmbassyScraper</a></p>
            </li>
          </ul>
          <h3 id="refactoring-marriage-abroad">Refactoring marriage-abroad</h3>
          <p>I spent most of my time continuing to try to improve marriage-abroad.</p>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2394">PR 2394 - Remove marriage-abroad outcome_os_consular_cni precalculate blocks</a>. Move logic out of the flow and into the associated MarriageAbroadCalculator object.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2409">PR 2409 - Rename marriage-abroad outcomes</a>. Consistently naming the marriage-abroad outcomes should hopefully make it clearer whether an outcome should be reused for a different purpose.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2410">PR 2410 - DRY up marriage-abroad same-sex ceremony-not-possible outcomes</a>. I’ve removed one of two almost identical outcomes and asked the content team whether the change in text is valid.</p>
            </li>
          </ul>
          <h3 id="fuller-set-of-regression-tests-for-marriage-abroad">Fuller set of regression tests for marriage-abroad</h3>
          <ul>
            <li>
              <a href="https://github.com/alphagov/smart-answers/pull/2395">PR 2395 - Add regression tests for all marriage-abroad countries</a>. While making changes to marriage-abroad it can occasionally be useful to run regression tests for all ceremony countries (rather than for the roughly 50% we use normally). I created this PR so that we could discuss making this change permanently.
            </li>
          </ul>
          <h3 id="updates-for-register-a-birth">2016/17 updates for register-a-birth</h3>
          <ul>
            <li>
              <a href="https://github.com/alphagov/smart-answers/pull/2407">PR 2407 - Add 2016/17 rates for register-a-birth</a>. In preparation for the start of the 2016/17 tax year on 6 April.
            </li>
          </ul>
          <h2 id="gfr">GFR</h2>
          <h3 id="ir35-tax-assurances">IR35 Tax Assurances</h3>
          <p>We received confirmation that our tax assurances for GDS are all in order.</p>
          <p>– Chris</p>
        </div>
        <div class='comments' id='comments'>
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id='article_links'>
        <h3>Recent</h3>
        <div id='recent_articles' style="margin-left: 2em">
          <ul class='blog_list' reversed="">
            <li value="6">
              <a href="/week-443">Week 443</a>
            </li>
            <li value="5">
              <a href="/week-441">Week 441</a>
            </li>
            <li value="4">
              <a href="/week-442">Week 442</a>
            </li>
            <li value="3">
              <a href="/week-442-links">Week 442 - Interesting links</a>
            </li>
            <li value="2">
              <a href="/week-440">Week 440</a>
            </li>
            <li value="1">
              <a href="/week-440-links">Week 440 - Interesting links</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <script charset="utf-8" src="/javascripts/app.js" type="text/javascript">
  </script> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
