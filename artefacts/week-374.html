<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Mac OS X version 5.2.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width" name="viewport">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <link href="/assets/application-e4364b3782cc7477f226bc8504403fa41bfb8d1f7a4ed67eb3fe80f20bd5b014.css" media="all" rel="stylesheet">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel='alternate' title='Go Free Range Blog' type='application/atom+xml'>
  <script src='http://use.typekit.com/rny4upv.js' type='text/javascript'>
  </script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 374 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class='nav group' id='blog_nav'>
        <li id='link_home'>
          <p>Visit our <a href='/'>company website</a></p>
        </li>
        <li id='link_rss'>
          <p>Grab the <a href='http://feeds.gofreerange.com/GoFreeRangeBlog' title='RSS Feed from Feedburner'>RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Tuesday 26th April, 2016</p>
        <div class="author">
          <img alt="Chris Roos" src="images/people/chris-roos.jpg"> <span>by Chris Roos</span>
        </div>
        <div class="content">
          <h1 id="week-374">Week 374</h1>
          <h2 id="smart-answers">Smart Answers</h2>
          <p><a href="https://github.com/pmanrubia">Pablo</a> joined the team this week. Welcome, Pablo!</p>
          <h3 id="automatically-detecting-next-nodes">Automatically detecting next nodes</h3>
          <p><a href="/james-mead">James</a> built on his work that <a href="https://github.com/alphagov/smart-answers/pull/2343">added support for automatically detecting next nodes for a Smart Answer</a>. The following pull requests incrementally improved the system until we were left with a single way of defining next nodes, and a single way of determining those next nodes for visualisation purposes.</p>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2368">PR 2368 - Use automatic next node detection in existing flows</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2370">PR 2370 - Use automatic next node detection in benefit-cap-calculator</a>. This was a special case because of the way we were dynamically deciding which node to show next.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2374">PR 2374 - Make auto-detecting permitted next nodes the default behaviour</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2378">PR 2378 - Remove <code>permitted</code> option from <code>next_node</code> with block</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2380">PR 2380 - Convert calls to <code>next_node</code> without a block into calls with a block</a>. Simplifies code by having a single syntax for specifying next nodes.</p>
            </li>
          </ul>
          <h3 id="smaller-changes">Smaller changes</h3>
          <p>James was on a roll this week and also made a number of smaller changes:</p>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2360">PR 2360 - Prevent duplicate permitted next nodes</a></p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2361">PR 2361 - Remove incorrect permitted next node from check-uk-visa</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2364">PR 2364 - Split integration test for two redundancy pay flows into two tests</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2384">PR 2384 - Remove unused script templates</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2385">PR 2385 - Remove unnecessary instance variable assignment in SmartAnswer::Question::Base</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2386">PR 2386 - Remove unused <code>state</code> attribute from flow</a>.</p>
            </li>
          </ul>
          <h3 id="refactoring-marriage-abroad">Refactoring marriage-abroad</h3>
          <p>I continued to refactor <a href="https://www.gov.uk/marriage-abroad">marriage-abroad</a>. I merged a couple of pull requests that had been given the thumbs up, and opened new pull requests that continue to remove <code>precalculate</code> blocks from the flow in favour of encapsulating logic in the associated calculator object:</p>
          <ul>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2352">PR 2352 - Remove Germany logic from marriage-abroad outcome_os_consular_cni</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2349">PR 2349 - Remove Japan from marriage-abroad outcome_os_consular_cni</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2382">PR 2382 - Remove <code>precalculate</code> blocks from the “outcome_cp_consular” outcome</a>.</p>
            </li>
            <li>
              <p><a href="https://github.com/alphagov/smart-answers/pull/2387">PR 2387 - Remove duplicate “*_path” <code>precalculate</code> blocks from three outcomes</a>.</p>
            </li>
            <li>
              <p>Removed <code>precalculate</code> blocks from the “outcome_os_consular_cni” outcome. I finished making the code changes but was left with a few commit messages to tidy before creating a pull request.</p>
            </li>
            <li>
              <p>Started working on consistently naming marriage-abroad outcomes in the hope that it makes it easier to work on this smart answers.</p>
            </li>
          </ul>
          <h2 id="gfr">GFR</h2>
          <h3 id="gfr-website">GFR website</h3>
          <p>James added <a href="https://github.com/freerange/site/pull/32">Rake tasks to make it easier to create week notes and week links</a>. The discussion highlighted a difference in our approach to updating metadata on our blog posts. Codifying the logic means that this shouldn’t be a problem in future.</p>
          <h3 id="ir35-tax-assurances">IR35 Tax Assurances</h3>
          <p>We forwarded our completed Working Practices Questionnaire to GDS. We were under the impression this wouldn’t be required but it’s been requested in order to “mark your assurances compliant”.</p>
          <h3 id="recording-client-time">Recording client time</h3>
          <p>We’re working somewhat irregular hours at the moment. Including weekends. This makes it a little hard to fit our time in with the Fieldglass system used by GDS. After some discussion, we agreed to split our time evenly between the two of us, and between Monday to Friday. This means that the time recorded against each day in Fieldglass won’t necessarily match reality but the totals remain the same, which is the important thing. James created a spreadsheet to help us convert from our hours logged in FreeAgent to those required by Fieldglass.</p>
          <h3 id="caffeine-monitor">Caffeine Monitor</h3>
          <p>James noticed that the mirror of <a href="http://cm.buildconf.com/">caffeine monitor</a> we’re hosting was down. A quick <a href="https://twitter.com/andymcmillan/status/710171697047949312">conversation with Andy McMillan</a> and it was all back up and running.</p>
          <p>– Chris</p>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-446-links">Week 446 - Interesting links</a>
            </li>
            <li value="5">
              <a href="/week-444">Week 444</a>
            </li>
            <li value="4">
              <a href="/week-444-links">Week 444 - Interesting links</a>
            </li>
            <li value="3">
              <a href="/week-443">Week 443</a>
            </li>
            <li value="2">
              <a href="/week-441">Week 441</a>
            </li>
            <li value="1">
              <a href="/week-442">Week 442</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js">
  </script> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
