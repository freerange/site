<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Mac OS X version 5.2.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ruby rails software development london" name="keywords">
  <meta content="telephone=no" name="format-detection">
  <link href="/assets/application-1507e54ca8e8109b8f18bb949aa6426ff1f387a59a864a86de4dbd371b20b242.css" media="all" rel="stylesheet">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel="alternate" title="Go Free Range Blog" type="application/atom+xml">
  <script src="http://use.typekit.com/rny4upv.js" type="text/javascript">
  </script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 444 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class="nav group" id="blog_nav">
        <li id="link_home">
          <p>Visit our <a href="/">company website</a></p>
        </li>
        <li id="link_rss">
          <p>Grab the <a href="http://feeds.gofreerange.com/GoFreeRangeBlog" title="RSS Feed from Feedburner">RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Friday 21st July, 2017</p>
        <div class="author">
          <img alt="Chris Lowis" src="images/people/chris-lowis.jpg"> <span>by Chris Lowis</span>
        </div>
        <div class="content">
          <h1 id="week-444">Week 444</h1>
          <p>Happy Friday everyone!</p>
          <p>We built up a head of steam this week with our work on improving how assets are stored for <a href="https://www.gov.uk/">GOV.UK</a>. As I outlined <a href="http://gofreerange.com/week-443">last week</a> we’re helping them to migrate uploaded assets (for example <a href="https://www.gov.uk/foreign-travel-advice/colombia">maps attached to travel advice</a> or the <a href="https://www.gov.uk/government/publications/spring-budget-2017-documents">spring budget</a>) to Amazon’s AWS S3 service.</p>
          <p>We are working towards a “<a href="http://alistair.cockburn.us/Walking+skeleton">walking skeleton</a>” to test the end-to-end process of uploading assets, storing them from S3 and then serving them to the user. This will help us to uncover any problems earlier, and give us confidence that our proposed approach will work. We’ll also be able to get all of the necessary credentials and connections in place early, which will help us to iterate.</p>
          <p>We tackled the problem on three fronts:</p>
          <ol>
            <li>We <a href="https://github.com/alphagov/govuk-terraform-provisioning/pull/125">updated the Terraform configuration</a> to provision the S3 bucket we need and to set up a user with the correct permissions.
            </li>
            <li>We <a href="https://github.com/alphagov/govuk-puppet/pull/6137">made sure the environment variables our application needs</a> were added to the application servers using Puppet; and
            </li>
            <li>We <a href="https://github.com/alphagov/asset-manager/pull/74">modified the asset manager</a> application so that it stores assets to S3 and allows them to be optionally served from S3 for testing purposes.
            </li>
          </ol>
          <p>We spent a bit of time debugging why the application on the integration servers wasn’t picking up the environment variables we set. In doing so we discovered a useful trick: on Unix-like systems you can inspect the environment that a given process is running in by looking at the file stored in <code>/proc/&lt;pid&gt;/environ</code> where <code>&lt;pid&gt;</code> is the process ID of the, in this case, <a href="https://bogomips.org/unicorn/">Unicorn</a> server running the application. This showed us that we needed to restart the application in a particular way in order for it to pick up the new environment.</p>
          <p>On Thursday we shared our work so far with <a href="https://twitter.com/danielroseman">Daniel</a> at GDS and got some useful feedback. It feels like we’re close now to having something working that we can develop further.</p>
          <p>Also on Thursday I met up with former Free Ranger <a href="http://lazyatom.com/">James Adam</a> at Outlandish’s office in Islington. <a href="https://outlandish.com/">Outlandish</a> have recently taken over the lease on an empty floor in their building and want to turn it in to a co-working and event space for <a href="http://coops.tech/">CoTech</a> members and other small tech businesses. We’re interested in being a part of this project and are considering taking some space there. Outlandish threw a fun office-warming party and invited a lot of interested people to take a look.</p>
          <p>In other CoTech activity, we stewarded a <a href="https://www.loomio.org/d/W8r3ASkl/allow-greennet-to-join-cotech">Loomio discussion</a> to allow a new member to join the network. While the outcome was a little unsatisfactory, it was positive that we can use <a href="https://www.loomio.org/">Loomio</a> to have nuanced, difficult discussions and come to a collective decision about how to proceed. We’re going to work hard on clarifying the membership criteria for CoTech so that hopefully this process becomes much simpler in the future.</p>
          <p>Along the way Chris wrote a <a href="http://gofreerange.com/show-and-tell-34">fantastic summary</a> of our recent Show and Tell event <em>and</em> shared some <a href="http://gofreerange.com/week-444-links">delicious links</a>.</p>
          <p>Have a very good weekend, won’t you?</p>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-481">Week 481</a>
            </li>
            <li value="5">
              <a href="/week-480">Week 480</a>
            </li>
            <li value="4">
              <a href="/week-477">Week 477</a>
            </li>
            <li value="3">
              <a href="/week-479">Week 479</a>
            </li>
            <li value="2">
              <a href="/week-478">Week 478</a>
            </li>
            <li value="1">
              <a href="/week-478-links">Week 478 - Interesting links</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js">
  </script> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
