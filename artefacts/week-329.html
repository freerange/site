<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Apple macOS version 5.6.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ruby rails software development london" name="keywords">
  <meta content="telephone=no" name="format-detection">
  <link href="/assets/application-1507e54ca8e8109b8f18bb949aa6426ff1f387a59a864a86de4dbd371b20b242.css" media="all" rel="stylesheet">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel="alternate" title="Go Free Range Blog" type="application/atom+xml">
  <script src="http://use.typekit.com/rny4upv.js" type="text/javascript"></script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 329 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class="nav group" id="blog_nav">
        <li id="link_home">
          <p>Visit our <a href="/">company website</a></p>
        </li>
        <li id="link_rss">
          <p>Grab the <a href="http://feeds.gofreerange.com/GoFreeRangeBlog" title="RSS Feed from Feedburner">RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Friday 22nd May, 2015</p>
        <div class="author">
          <img alt="James Mead" src="images/people/james-mead.jpg"> <span>by James Mead</span>
        </div>
        <div class="content">
          <h1 id="week-329">Week 329</h1>
          <p>Now that the <a href="https://gds.blog.gov.uk/2015/03/29/the-pre-election-period/">pre-election period</a> has passed, I can exclusively reveal that the “secret” client project we’ve been working on is at the <a href="https://www.gov.uk/government/organisations/government-digital-service">Government Digital Service</a> (GDS).</p>
          <p>The project concerns the bits of the <a href="https://www.gov.uk">GOV.UK website</a> which ask users a series of questions in order to show them an answer specific to their situation. Within GDS these are known generically as <a href="https://gds.blog.gov.uk/2012/02/16/smart-answers-are-smart/">Smart Answers</a>.</p>
          <p>Rather than try to explain everything we’ve been doing on the project over the last few weeks, I thought I’d try to describe the situation when we arrived at GDS and a bit about what we’ve been asked to do. Hopefully we can then gradually bring you up-to-date over the next few weeks.</p>
          <h2 id="smart-answers">Smart Answers</h2>
          <p>The <em>Smart Answer</em> “format” covers a wide range of domains. To give you a bit of a flavour, here are some examples:</p>
          <ul>
            <li>
              <a href="https://www.gov.uk/calculate-statutory-sick-pay">Calculate your employee’s statutory sick pay</a>
            </li>
            <li>
              <a href="https://www.gov.uk/marriage-abroad">Getting married abroad</a>
            </li>
            <li>
              <a href="https://www.gov.uk/student-finance-calculator">Student finance calculator</a>
            </li>
            <li>
              <a href="https://www.gov.uk/pay-leave-for-parents">Calculate your leave and pay when you have a child</a>
            </li>
          </ul>
          <h3 id="taxonomy">Taxonomy</h3>
          <p>Some of the <em>Smart Answers</em> are purely decision trees, some are calculators, and others are hybrids of the two. They’re currently implemented in a number of different ways:</p>
          <h4 id="smart-answers-app">Smart Answers App</h4>
          <p>The majority of <em>Smart Answers</em> have been built using a <a href="https://github.com/alphagov/smart-answers/blob/master/lib/smart_answer_flows/README.md">Ruby DSL</a> in the <a href="https://github.com/alphagov/smart-answers">Smart answers app</a>, a non-ActiveRecord Rails app. The DSL describes the possible journeys through the questions and possible outcomes. It makes heavy use of the <a href="http://guides.rubyonrails.org/i18n.html">Rails I18n API</a> with the default YAML backend to store the <a href="https://github.com/alphagov/smart-answers/tree/master/lib/smart_answer_flows/locales/en">question & outcome content</a>.</p>
          <p>A couple of these <em>Smart Answers</em> have been converted to use, or written using, the internally developed <a href="https://github.com/alphagov/smartdown">Smartdown library</a>. The latter extends the idea of the <a href="https://github.com/alphagov/govspeak">Govspeak library</a>, which itself is an extension of <a href="http://daringfireball.net/projects/markdown/">Markdown</a>.</p>
          <p>The idea behind the Smartdown approach is to make it easier for <a href="https://www.gov.uk/service-manual/the-team/content-designer.html">content designers</a> to create and update the <em>Smart Answers</em> without needing to involve developers.</p>
          <h4 id="publisher-app--simple-smart-answers">Publisher App / Simple Smart Answers</h4>
          <p>Simpler <em>Smart Answers</em> have been authored using the <em>Simple Smart Answer</em> format in the <a href="https://github.com/alphagov/publisher">Publisher app</a>. As with other formats in the Publisher app, the data is <a href="https://github.com/alphagov/govuk_content_models/">saved to MongoDB</a>. However, in contrast to other formats, <em>Simple Smart Answers</em> save a <a href="https://github.com/alphagov/govuk_content_models/blob/8f749fae942ae033ad36e940aecc44605c9c28f1/app/models/simple_smart_answer_edition.rb#L10">graph of objects</a> representing the user’s possible journeys through the questions and the possible outcomes.</p>
          <p>The <a href="https://github.com/alphagov/frontend">Frontend app</a> retrieves this graph of objects from MongoDB via the <a href="https://github.com/alphagov/govuk_content_api">Content API</a> and displays the questions to the user, accepts responses to the questions, and eventually takes them through to the appropriate outcome.</p>
          <p>Although <em>Simple Smart Answers</em> are implemented separately, they’re intended to look and feel the same as <em>Smart Answers</em>. Here are a couple of examples:</p>
          <ul>
            <li>
              <a href="https://www.gov.uk/settle-in-the-uk">Apply to settle in the UK</a>
            </li>
            <li>
              <a href="https://www.gov.uk/state-pension-statement">Get a State Pension statement</a>
            </li>
          </ul>
          <p><em>Smart Answers</em> in this form can be created/updated in a draft state which allows them to be previewed before publication.</p>
          <h4 id="calculators-app">Calculators App</h4>
          <p><a href="https://www.gov.uk/child-benefit-tax-calculator">One other</a> <em>Smart Answer</em> has been built in its own non-ActiveRecord Rails app, the <a href="https://github.com/alphagov/calculators">Calculators app</a>. This was built in a separate app, because it needed some extra functionality e.g. the ability to change the number of questions asked on a page depending on the response given to an earlier question.</p>
          <h3 id="the-brief">The Brief</h3>
          <p>These <em>Smart Answers</em> have proved very popular with users, but it’s turned out that in their current forms, it takes a considerable amount of time and effort to develop new ones and even just to keep the existing ones up-to-date with the latest rates, changes in policy, etc. In particular it takes a lot of developer effort which is in short supply.</p>
          <p>Our brief is to take a bit of a step back and work out how the development and maintenance of <em>Smart Answers</em> can be put on a more sustainable footing. We really appreciate that GDS has presented us with a problem to solve, rather than a solution to implement. It’s definitely going to be a significant challenge, but hopefully we can come up with a good solution.</p>
          <h2 id="gfr">GFR</h2>
          <p>Monday was a bank holiday, so we spent Tuesday-Thursday working on the Smart Answers project (see above), although we worked remotely from GFRHQ on the Wednesday.</p>
          <p>Over the bank holiday weekend I finally got round to a few things:</p>
          <ul>
            <li>
              <a href="https://github.com/freerange/ais-on-sdr/wiki/Capturing-raw-AIS-data-using-rtl_fm-and-decoding-using-aisdecoder-v2">Processing the AIS data</a> I’d collected from a ferry on the way back from the Isle of Wight.
            </li>
            <li>Publishing a <a href="https://docs.google.com/spreadsheets/d/17fmYMmw-ugnjPB5t3FzBgQPlmyHPaE9AA_oH2uWUwH0/edit?usp=sharing">Tax Calculator</a> I built to help us decide on the mix of salary versus dividends to pay ourselves.
            </li>
            <li>
              <a href="https://gist.github.com/floehopper/b13fd71e9aa7946692bf">Playing with Google App Scripting</a>.
            </li>
          </ul>
          <p>We spent Friday mostly working on GFR admin, although we did manage to fit in lunch with Tom and Murray at the <a href="http://www.strongroombar.com/">Strongroom Bar & Kitchen</a> and a couple of beers at the <a href="http://shoreditchworks.com/">Shoreditch Works</a> mixer at the end of the day.</p>
          <p>Chris spoke to <a href="http://www.prsformusic.com/">PRS</a> to update the address on our license, but discovered that frustratingly they are non-refundable and non-transferrable, so we had to buy a whole new license.</p>
          <p>Anyway, that’s all folks. I’m sorry these notes were so late. Until next time.</p>
          <p>– James</p>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-481">Week 481</a>
            </li>
            <li value="5">
              <a href="/week-480">Week 480</a>
            </li>
            <li value="4">
              <a href="/week-477">Week 477</a>
            </li>
            <li value="3">
              <a href="/week-479">Week 479</a>
            </li>
            <li value="2">
              <a href="/week-478">Week 478</a>
            </li>
            <li value="1">
              <a href="/week-478-links">Week 478 - Interesting links</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js"></script> 
  <script>


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
