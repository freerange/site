<!DOCTYPE html>
<html lang='en'>
<head>
  <meta content="HTML Tidy for HTML5 for Mac OS X version 5.2.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width" name="viewport">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <link href="/stylesheets/screen.css" rel="stylesheet" title="screen" type="text/css">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel='alternate' title='Go Free Range Blog' type='application/atom+xml'>
  <script src='http://use.typekit.com/rny4upv.js' type='text/javascript'>
  </script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 342 — Go Free Range.</title>
</head>
<body class='blog'>
  <div id='page'>
    <div class='group' id='header'>
      <ul class='nav group' id='blog_nav'>
        <li id='link_home'>
          <p>Visit our <a href='/'>company website</a></p>
        </li>
        <li id='link_rss'>
          <p>Grab the <a href='http://feeds.gofreerange.com/GoFreeRangeBlog' title='RSS Feed from Feedburner'>RSS</a> feed</p>
        </li>
      </ul>
      <h1 id='logo'><a href='/blog' title='Go to blog index'>Blog index</a></h1>
    </div>
    <div class='group' id='content'>
      <div class='blog_entry group'>
        <p class='article_date'>Friday 14th August, 2015</p>
        <div class='author'>
          <img alt='James Mead' src='images/people/james-mead.jpg'> <span>by James Mead</span>
        </div>
        <div class='content'>
          <h1 id="week-342">Week 342</h1>
          <p>We did the usual 4:1 split of days between Smart Answers and GFR, although Chris was still away at Jase’s wedding on Monday.</p>
          <h2 id="smart-answers">Smart Answers</h2>
          <h3 id="content-team-show--tell">Content Team Show & Tell</h3>
          <p>On Tuesday morning, the Content Team held a Show & Tell session. Unfortunately I was off sick that morning, but Chris gamely stepped into the breach and expained a bit about what we’ve been asked to do, what approach we’ve taken, what we’ve done so far, and what we hope to do next.</p>
          <h3 id="erb-templates--refactoring">ERB Templates & Refactoring</h3>
          <p>After that Chris re-started his work on converting the large & complicated <a href="https://www.gov.uk/marriage-abroad">marriage-abroad smart answer</a> to use ERB templates. This smart answer seems to be the one that changes most frequently - mainly because it’s dependent on the legal systems and processes of all the countries of the world and their embassies.</p>
          <p>The frequent changes have meant it’s been difficult to find the right time to do the conversion to ERB templates, but since it’s the only one left to convert, we’re determined to get it done soon! Later in the week during a bit of a lull in the marriage-abroad action, Chris got the following pull requests merged:</p>
          <ul>
            <li>
              <a href="https://github.com/alphagov/smart-answers/pull/1856">Epic refactoring of the minimum-wage shared logic</a>
            </li>
            <li>
              <a href="https://github.com/alphagov/smart-answers/pull/1863">Convert calculate-statutory-sick-pay to use ERB templates</a>
            </li>
          </ul>
          <p>In the middle of the week, I did a quick bit of tidying up so that all our integration tests are <a href="https://github.com/alphagov/smart-answers/pull/1877">consistently instantiating flows directly rather than looking them up in the registry</a>.</p>
          <h3 id="tax-credits-part-year-finalisation">Tax Credits Part-Year Finalisation</h3>
          <p>Otherwise I spent most of the rest of the week trying to design and build a new smart answer for HMRC. This is intended to help self-employed people who are switching from Tax Credits onto Universal Credit part way through a tax year.</p>
          <p>They have to complete a form “finalising” their Tax Credits and that form has a box for the taxable profit they’ve made (or estimate that they’ll have made) during the part year. The smart answer is meant to help calculate what this figure should be.</p>
          <p>Content Team stalwart, Liz, has worked heroically with people at HMRC to come up with a set of rules for the calculation. She’s done a great job with the information available to her, but it sounds as if it’s been difficult because she hasn’t been able to talk <em>directly</em> to policy experts much (if at all). Consequently she’s had to reverse engineer a set of rules out of a set of example scenarios.</p>
          <p>Unfortunately this means that the rules are rather complicated and I’ve found it hard to understand the motivation behind each of them. I could probably have just gone ahead and blindly turned these rules into code, but I was concerned that the result would be hard to understand and maintain.</p>
          <p>On Wednesday morning Liz and I had a phone call with her contact at HMRC and I understood a bit more about the rationale behind some of the logic. However, I still had unresolved questions which were hard to put into words on a phone call. Part of the difficulty with talking about this smart answer is that it’s all about a bunch of dates and date ranges like the tax year, accounting years, etc.</p>
          <p>To make it easier to understand what was going on I decided to build a visualisation using the <a href="https://developers.google.com/chart/interactive/docs/gallery/timeline">Timeline chart</a> from Google’s <a href="https://developers.google.com/chart/interactive/docs/">Chart library</a> pulling data from a Google spreadsheet. When the relevant dates are entered into the “Calculator” sheet of the spreadsheet, the formulae on the “DataTable” sheet generate values which are then pulled into the Timeline chart.</p>
          <p>I hope to sit with someone from HMRC and go through various scenarios using this visualisation tool in order to better model the policy behind the calculator.</p>
          <h2 id="gfr">GFR</h2>
          <p>On Friday morning we both ticked off a bunch of company admin. Chris wrote up the <a href="/week-341">week notes</a> and I compiled our <a href="/week-342-links">interesting links</a>. Chris worked through the monthly task for paying ourselves and for the first time included the payments to our personal pensions in our payslips. We still need to contact HMRC to find out whether we need to do anything to “fix” payslips for previous months, but this feels like a good step forward.</p>
          <p>After lunch we were joined by our <a href="http://hookline.tv/">Hookline</a> friends, Amy and Rachel. They’ve been making great progress with their independent music brokerage business, but in the process they’ve come up with an interesting product idea. We spent the afternoon chatting about a possible collaboration to explore the product idea further. Exciting times!</p>
          <p>Anyhoo - that’s all for now. Until next time.</p>
          <p>– James</p>
        </div>
        <div class='comments' id='comments'>
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id='article_links'>
        <h3>Recent</h3>
        <div id='recent_articles' style="margin-left: 2em">
          <ul class='blog_list' reversed="">
            <li value="6">
              <a href="/week-444">Week 444</a>
            </li>
            <li value="5">
              <a href="/week-444-links">Week 444 - Interesting links</a>
            </li>
            <li value="4">
              <a href="/week-443">Week 443</a>
            </li>
            <li value="3">
              <a href="/week-441">Week 441</a>
            </li>
            <li value="2">
              <a href="/week-442">Week 442</a>
            </li>
            <li value="1">
              <a href="/week-442-links">Week 442 - Interesting links</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <script charset="utf-8" src="/javascripts/app.js" type="text/javascript">
  </script> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
