<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Apple macOS version 5.6.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ruby rails software development london" name="keywords">
  <meta content="telephone=no" name="format-detection">
  <link href="/assets/application-1507e54ca8e8109b8f18bb949aa6426ff1f387a59a864a86de4dbd371b20b242.css" media="all" rel="stylesheet">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel="alternate" title="Go Free Range Blog" type="application/atom+xml">
  <script src="http://use.typekit.com/rny4upv.js" type="text/javascript"></script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 331 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class="nav group" id="blog_nav">
        <li id="link_home">
          <p>Visit our <a href="/">company website</a></p>
        </li>
        <li id="link_rss">
          <p>Grab the <a href="http://feeds.gofreerange.com/GoFreeRangeBlog" title="RSS Feed from Feedburner">RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Friday 5th June, 2015</p>
        <div class="author">
          <img alt="Chris Roos" src="images/people/chris-roos.jpg"> <span>by Chris Roos</span>
        </div>
        <div class="content">
          <h1 id="week-331">Week 331</h1>
          <p>Howdi, folks.</p>
          <p>We continue to divide our week between <a href="https://gds.blog.gov.uk/">GDS</a> and GFR, spending Monday to Thursday working on <a href="https://github.com/alphagov/smart-answers">Smart Answers</a> for GDS and Friday working for ourselves.</p>
          <h2 id="smart-answers">Smart Answers</h2>
          <p><a href="/james-mead">James</a> continued to improve the Smart Answers DSL by adding options to parse value questions as floats. This allows us to declare the type of data we’re expecting and to <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> up a number of the Smart Answers that were each having to parse responses.</p>
          <p>James replaced some of our custom rake test tasks with the standard Rails test tasks. In doing so, we realised that Rails now runs all tests together, where it would previously run unit tests before anything else. James points out that it’s desirable to run unit tests separately as they’re supposed to run quickly and give you some early warning as to whether other tests are going to fail. There’s no point continuing to run the more expensive integration tests if the unit tests are failing.</p>
          <p>I started the week by opening a <a href="https://github.com/alphagov/smart-answers/pull/1642">pull request containing an example set of the regression tests</a> that James talked about in <a href="/week-330">week 330</a>. We had some good discussion on the pull request itself and later on in-person, after which we agreed to go ahead with the regression testing approach.</p>
          <p>There were some concerns about this approach (see the discussion on the pull request if you’re interested) but in the end we think the benefits outweight the potential problems and we’re fairly confident that these tests will be relatively shortly lived while we make some of the larger changes that we’re planning.</p>
          <p>Before merging the first set of regression tests, I spent a short while investigating the addition of such tests to the complex <a href="https://www.gov.uk/marriage-abroad">Marriage Abroad Smart Answer</a>. This Smart Answer contains questions that allow you to choose from a list of countries. Testing every combination would be impractical so I wanted to see whether it’d be possible to reduce the number of combinations while still retaining close to 100% code coverage. While I didn’t finish this exercise, I got far enough to convince myself that it would be possible.</p>
          <p>Working with our new <a href="/week-330#templating-mechanism">ERB templates</a> made me realise that I didn’t understand how the various trim modes worked. I ended up <a href="https://gist.github.com/chrisroos/b80bb493db20b4302888.">creating a number of tests to try to demonstrate the behaviour</a> and now have a slightly better idea about how they work.</p>
          <p>One unexpected, but beneficial, side effect of switching from YAML to ERB was the speed up of the newly added regression tests: I saw a <a href="https://github.com/alphagov/smart-answers/commit/1837c0c7584cfc70f89c6dafd632fee4a53b8929">reduction of around 60 seconds (from 110s to 50s) after making the change</a>!</p>
          <p>I spent a short while trying to run <a href="https://github.com/bbatsov/rubocop">Rubocop</a> as part of our build process. We already have Rubocop in the project but it’s not currently configured to run. I didn’t quite get it running but I’m pretty keen so I think I’ll have another play soon. One thing I hadn’t seen before was Rubocop’s ability to automatically fix a number of violations. That definitely could’ve saved me some time in the past when I’ve gone through manually fixing some of the more trivial violations.</p>
          <h2 id="gfr">GFR</h2>
          <p>We had a slightly more relaxed Friday after the fairly intensive week working on Smart Answers. I’m enjoying the work but it’s definitely leaving me feeling quite tired, and without the time/energy to focus on GFR things during the week.</p>
          <p>We spent most of the day ticking off some admin tasks that had built up during the week.</p>
          <p>James and I had an enjoyable lunch with <a href="https://twitter.com/tomtaylor">Tom T</a>, <a href="https://twitter.com/tomstuart">Tom S</a>, <a href="https://twitter.com/beng">Ben G</a> and <a href="http://blog.chrislowis.co.uk/">Chris L</a> at the Strongrooms. The sun drew us out but we weren’t quite early enough to beat everyone else with the same idea and ended up sitting in the shade.</p>
          <p>Chris L spent the afternoon in our office and managed to publish <a href="http://blog.chrislowis.co.uk/waw/2015/05/22/web-audio-weekly-36.html">Web Audio Weekly 36</a>.</p>
          <p>The only real thing of note I managed to do was to update our <a href="https://github.com/freerange/site/blob/master/soups/wiki/checking-our-annual-accounts.snip.markdown">Checking our Annual accounts page</a>. This had been hanging over since we completed our annual accounts at the beginning of the year so it was great to finally get it done.</p>
          <p>We finished up Friday afternoon at the <a href="http://shoreditchworks.com/">Shoreditch Works</a> Mixer. We spent some time chatting to <a href="http://benfields.net/">Ben</a> and <a href="http://samphippen.com/">Sam</a> of <a href="http://funandplausible.solutions/">Fun and Plausible</a>. Although we only sit a few metres from each other, our paths hadn’t really crossed so it was good to finally meet them properly.</p>
          <p>Until next time.</p>
          <p>– Chris</p>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-482">Week 482</a>
            </li>
            <li value="5">
              <a href="/week-481">Week 481</a>
            </li>
            <li value="4">
              <a href="/week-480">Week 480</a>
            </li>
            <li value="3">
              <a href="/week-477">Week 477</a>
            </li>
            <li value="2">
              <a href="/week-479">Week 479</a>
            </li>
            <li value="1">
              <a href="/week-478">Week 478</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js"></script> 
  <script>


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
