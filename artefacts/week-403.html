<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Apple macOS version 5.6.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ruby rails software development london" name="keywords">
  <meta content="telephone=no" name="format-detection">
  <link href="/assets/application-1507e54ca8e8109b8f18bb949aa6426ff1f387a59a864a86de4dbd371b20b242.css" media="all" rel="stylesheet">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel="alternate" title="Go Free Range Blog" type="application/atom+xml">
  <script src="http://use.typekit.com/rny4upv.js" type="text/javascript"></script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 403 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class="nav group" id="blog_nav">
        <li id="link_home">
          <p>Visit our <a href="/">company website</a></p>
        </li>
        <li id="link_rss">
          <p>Grab the <a href="http://feeds.gofreerange.com/GoFreeRangeBlog" title="RSS Feed from Feedburner">RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Monday 24th October, 2016</p>
        <div class="author">
          <img alt="James Mead" src="images/people/james-mead.jpg"> <span>by James Mead</span>
        </div>
        <div class="content">
          <h1 id="week-403">Week 403</h1>
          <p>Chris spent quite a bit of time this week working on getting his houseboat ready to re-launch. I mainly worked on our Music Library project in collaboration with <a href="http://hookline.tv/">Hookline</a>.</p>
          <h3 id="trello">Trello</h3>
          <p>On Monday, as has become our habit of late, Chris & I met up and worked together at the <a href="http://www.benugo.com/restaurants/bfi-bar-kitchen">Benugo cafe at the BFI</a>. We’ve got into a good rhythm of going through our main company Trello board at the beginning of each week and picking out tasks that we want to aim to do that week. Although we still have a big backlog of cards, it feels as if we’re much more on top of things than we have been.</p>
          <h3 id="virtual-office">Virtual office</h3>
          <p>Having signed up for a UK Postbox address <a href="/week-401#virtual-office">a couple of weeks ago</a>, this week we tested it was working by sending a letter to the new address. Having confirmed it was working OK, we started changing our address with various entities, e.g. HMRC, Companies House, our bank, etc.</p>
          <h3 id="mocha">Mocha</h3>
          <p>We both did a small amount of work on <a href="/mocha/docs/">Mocha</a> to move us closer to a v1.2 release.</p>
          <h3 id="annual-accounts">Annual accounts</h3>
          <p>Chris spoke to our accountant, Paul, to see whether they could get to the bottom of the remaining discrepancy between our FreeAgent accounts and the annual accounts generated by Paul. Although they managed to close the gap a bit further, we’re still left with a small discrepancy. Paul is happy that this small discrepancy is <a href="https://en.wikipedia.org/wiki/Materiality_(auditing)">not material to the accounts</a>, so we gave him the go-ahead to submit our accounts to Companies House and HMRC.</p>
          <h3 id="credit-union">Credit union</h3>
          <p>I <a href="/project-credit-union-day-1#comment-2930917130">replied</a> <a href="/project-credit-union-day-1#comment-2930903634">to</a> some questions about our <a href="/credit-union">credit union project</a> on our blog.</p>
          <h3 id="prospective-client">Prospective client</h3>
          <p>Following on from <a href="/week-402#potential-client-faqs">the work he did last week</a>, Chris sent an excellent reply to a prospective client explaining how we would approach the project he has in mind, e.g. identifying a <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">minimum viable product</a>, and <a href="http://martinfowler.com/bliki/MonolithFirst.html">avoiding micro-services</a> early in the project.</p>
          <h3 id="music-library-project">Music Library project</h3>
          <p>I did a bunch of work mostly around adding client- and server-side validation, and better handling of errors. Some of this led me into wanting to refactor our existing JavaScript and write some unit tests for it.</p>
          <h4 id="javascript-unit-tests">Javascript unit tests</h4>
          <p>I spent a while looking at the myriad ways available to do this, but in the end I simply split the code up into “modules” using anonymous functions and wrote tests using <a href="http://jasmine.github.io/">Jasmine</a>. I used the <a href="https://github.com/searls/jasmine-rails">jasmine-rails gem</a> to set this up and later added the <a href="https://github.com/travisjeffery/jasmine-jquery-rails">jasmine-jquery-rails gem</a> in order to be able to make use of <a href="https://github.com/velesin/jasmine-jquery">jasmine-jquery</a>’s matchers and HTML fixtures.</p>
          <p>I’m not totally convinced about having the HTML fixtures in separate files, but I thought I’d give them a go. I struggled a bit to get the HTML fixtures working. However, I eventually managed it thanks to a combination of <a href="https://github.com/searls/jasmine-rails/issues/123#issuecomment-48640368">this Github comment</a> and <a href="http://nicholshayes.co.uk/blog/?p=507">this blog post</a>.</p>
          <h4 id="non-activerecord-models">Non-ActiveRecord models</h4>
          <p>Even though for the moment we’re building the system just for Hookline, we’re considering trying to offer it as a product for other music publishers. In order to capture Hookline-specific behaviour, we’d already introduced a Publisher ActiveModel class, with a static Hookline instance.</p>
          <p>As an extension of this I recently wanted to introduce a Catalogue class, but I wanted both Publisher & Catalogue to have IDs so that ActiveRecord models could reference them. Thus I decided to use <a href="http://po-ru.com/">Paul B</a>’s <a href="https://github.com/alphagov/whitehall/blob/84cb4717e2c1d710e71972e02a3afec957bce8f5/lib/active_record_like_interface.rb">ActiveRecordLikeInterface</a> which has worked pretty nicely.</p>
          <h4 id="large-zip-files">Large zip files</h4>
          <p>Towards the end of the week I had some “fun” using <a href="https://github.com/rubyzip/rubyzip">Rubyzip</a> to create large (5GB+) zip files using the AWS SDK to upload them to an S3 bucket.</p>
          <p>The first problem I had was that the zip file I created didn’t appear to have a “central directory” which meant that some tools couldn’t unzip the file. This turned out to be a mistake in the way I was using Rubyzip.</p>
          <p>Secondly the Ruby version of the AWS SDK refused to upload my file, because it was too big to be handled by <a href="http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html#put-instance_method">Aws::S3::Object#put</a> which only does single-part uploads. I spent a while trying to work out how to use the SDK to do multi-part uploads when I fortuitously stumbled upon <a href="http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html#upload_file-instance_method">Aws::S3::Object#upload_file</a> which automatically uses a multi-part upload for larger files. It particularly nice, because it spawns multiple threads to upload the parts in parallel.</p>
          <p>Anyway that’s all for this week. Until next time.</p>
          <p>– James</p>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-481">Week 481</a>
            </li>
            <li value="5">
              <a href="/week-480">Week 480</a>
            </li>
            <li value="4">
              <a href="/week-477">Week 477</a>
            </li>
            <li value="3">
              <a href="/week-479">Week 479</a>
            </li>
            <li value="2">
              <a href="/week-478">Week 478</a>
            </li>
            <li value="1">
              <a href="/week-478-links">Week 478 - Interesting links</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js"></script> 
  <script>


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
