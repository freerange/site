<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Apple macOS version 5.6.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ruby rails software development london" name="keywords">
  <meta content="telephone=no" name="format-detection">
  <link href="/assets/application-1507e54ca8e8109b8f18bb949aa6426ff1f387a59a864a86de4dbd371b20b242.css" media="all" rel="stylesheet">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel="alternate" title="Go Free Range Blog" type="application/atom+xml">
  <script src="http://use.typekit.com/rny4upv.js" type="text/javascript"></script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 458 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class="nav group" id="blog_nav">
        <li id="link_home">
          <p>Visit our <a href="/">company website</a></p>
        </li>
        <li id="link_rss">
          <p>Grab the <a href="http://feeds.gofreerange.com/GoFreeRangeBlog" title="RSS Feed from Feedburner">RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Tuesday 31st October, 2017</p>
        <div class="author">
          <img alt="Chris Roos" src="images/people/chris-roos.jpg"> <span>by Chris Roos</span>
        </div>
        <div class="content">
          <h1 id="week-458">Week 458</h1>
          <p>We continued working on the <a href="https://github.com/alphagov/asset-manager">Asset Management</a> project for <a href="https://gds.blog.gov.uk/">GDS</a> this week; working from home, <a href="http://www.theofficegroup.co.uk/">TOG</a> Bloomsbury and <a href="http://space4.tech">Space4</a>.</p>
          <p><a href="/james-mead">James</a> was away on Thursday and Friday to visit the Isle of Wight.</p>
          <h2 id="asset-manager">Asset Manager</h2>
          <p><a href="/chris-lowis">Chris</a> and I spent the week working on serving a subset of <a href="http://github.com/alphagov/whitehall">Whitehall</a> assets from Asset Manager. James continued to work on decommissioning the use of NFS for storing Asset Manager assets.</p>
          <p>We decided to descope the work of serving Whitehall assets from Asset Manager by focussing on organisation logos. We’d initially descoped the work to focus on non-access-controlled assets but that was still proving quite large. Descoping further should help us get an end-to-end slice working earlier and we’ll be able to use what we learn to help migrate the remaining assets.</p>
          <p>Chris and I paired on tracking down a hairy bug in our new <a href="https://github.com/carrierwaveuploader/carrierwave">CarrierWave</a> File object where, even after removing the file, it was still reported as being present. The fix was simply adding a method to our object but the tangle of code made it very hard to find. I wonder whether it’d be possible for CarrierWave to have some kind of tests that we could use to check whether our object satisfies the interface it’s expecting.</p>
          <p>Fixing the hairy CarrierWave problem means that we now have Whitehall organisation logos being uploaded to and deleted from Asset Manager. All that remains is to upload existing organisation logos and switch the <a href="https://nginx.org/">Nginx</a> routing so that they’re being served from Asset Manager instead of Whitehall. Chris worked on uploading existing logos and I made the necessary Nginx and Whitehall changes so that we’re ready to switch once the existing logos have been uploaded.</p>
          <p>James enabled <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/crr.html">cross-region replication</a> on our production S3 asset bucket. We’re currently using <a href="http://duplicity.nongnu.org/">Duplicity</a> to back-up our production assets from NFS to S3 so switching to AWS native technology will allow us to remove another moving part from the GOV.UK stack.</p>
          <p>James has also started investigating how to copy the production assets to both staging and integration overnight to mirror the current rsync’ing of assets between environments.</p>
          <p>We arrived one morning to learn that one of our Nginx changes contained an error that prevented Nginx from starting! It was discovered because the integration environment is rebooted every night and Nginx failed to start when the machines came up. We found and fixed the problem quite quickly and James updated the puppet scripts so that they’ll fail fast if they detect a problem with the Nginx config in future.</p>
          <p>We had our regular catch-up meeting with <a href="https://twitter.com/danielroseman">Daniel</a> on Wednesday.</p>
          <h2 id="annual-accounts">Annual accounts</h2>
          <p>After a successful call with our new accountant, during which they answered all the questions we had about the accounts, we were able to get them submitted and our corporation tax paid. It was a relief to get this all done given the deadline is the end of October!</p>
          <h2 id="changing-our-articles-of-association">Changing our Articles of Association</h2>
          <p>James continued to read through the new <a href="https://en.wikipedia.org/wiki/Articles_of_association">Articles of Association</a> that we discussed in <a href="/week-453">week 453</a>. We’re still hoping to have adopted them by the time we attend the <a href="https://www.coops.tech/">CoTech</a> retreat at <a href="https://www.wortleyhall.org.uk/">Wortley Hall</a>.</p>
          <h2 id="space4-launch">Space4 launch</h2>
          <p>We combined our regular monthly drinks with the Space4 launch party on Thursday. It was really well attended and the handful of lightning talks I heard were all really good. <a href="https://twitter.com/tomafro">Tom W</a> joined us and so we ended up heading off early to a local pub for a bit of a catch-up before heading home.</p>
          <h2 id="cotech">CoTech</h2>
          <p>Chris drafted a proposal to request some money from <a href="http://solidfund.coop/">Solid Fund</a> to help with funding the CoTech retreat to Wortley Hall and James posted <a href="https://community.coops.tech/t/what-has-cotech-done-nov-2016-nov-2017/379/5">a summary of our CoTech involvement</a> to a thread on the discussion forum.</p>
          <h2 id="cashflow">Cashflow</h2>
          <p>James investigated why our simple cashflow calculator started reporting that we had an additional two months reserves in the bank from one month to the next. While an additional two months sounds positive we were worried that the jump meant that something wasn’t quite right in our calculations. We don’t completely understand the reason for the jump but we’re fairly confident that the results are correct. We’ve agreed to pair on this task in future to try to ensure we’re all doing it in the same way.</p>
          <h2 id="website">Website</h2>
          <p>James updated our website to avoid exceptions we were seeing when a certain crawler was requesting our content as <code>text/plain</code>. The current fix is to <a href="https://github.com/freerange/site/commit/9abe7ef719e375bb9cabf96f29f861b7b6bf0b4a">reject these requests with a 406 Not Acceptable</a> response but we wonder whether simply returning HTML in this case would be better.</p>
          <p>That’s all for this week.</p>
          <p>– Chris</p>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-481">Week 481</a>
            </li>
            <li value="5">
              <a href="/week-480">Week 480</a>
            </li>
            <li value="4">
              <a href="/week-477">Week 477</a>
            </li>
            <li value="3">
              <a href="/week-479">Week 479</a>
            </li>
            <li value="2">
              <a href="/week-478">Week 478</a>
            </li>
            <li value="1">
              <a href="/week-478-links">Week 478 - Interesting links</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js"></script> 
  <script>


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
