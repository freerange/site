<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="HTML Tidy for HTML5 for Mac OS X version 5.2.0" name="generator">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="A small software development company based in London, UK." name="description">
  <meta content="GNqgxou6cYLkYq9l47mZM00R93JN49KqRhJebklH7uo" name="google-site-verification">
  <meta content="width=device-width" name="viewport">
  <meta content="ruby rails software development london" name="keywords">
  <meta content="telephone=no" name="format-detection">
  <link href="/assets/application-e4364b3782cc7477f226bc8504403fa41bfb8d1f7a4ed67eb3fe80f20bd5b014.css" media="all" rel="stylesheet">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="http://feeds.gofreerange.com/GoFreeRangeBlog" rel="alternate" title="Go Free Range Blog" type="application/atom+xml">
  <script src="http://use.typekit.com/rny4upv.js" type="text/javascript">
  </script>
  <script>
  try{Typekit.load();}catch(e){}
  </script>
  <title>Week 229 — Go Free Range.</title>
</head>
<body class="blog">
  <div id="page">
    <div class="group" id="header">
      <ul class="nav group" id="blog_nav">
        <li id="link_home">
          <p>Visit our <a href="/">company website</a></p>
        </li>
        <li id="link_rss">
          <p>Grab the <a href="http://feeds.gofreerange.com/GoFreeRangeBlog" title="RSS Feed from Feedburner">RSS</a> feed</p>
        </li>
      </ul>
      <h1 id="logo"><a href="/blog" title="Go to blog index">Blog index</a></h1>
    </div>
    <div class="group" id="content">
      <div class="blog_entry group">
        <p class="article_date">Friday 7th June, 2013</p>
        <div class="author">
          <img alt="James Mead" src="images/people/james-mead.jpg"> <span>by James Mead</span>
        </div>
        <div class="content">
          <h1 id="week-229">Week 229</h1>
          <p>Having been struck down by an unpleasant <a href="http://en.wikipedia.org/wiki/The_Goon_Show#Lurgi">lurgi</a> at the weekend, I haven’t caught up with any of my colleagues in person this week. However, we’ve had another busy week on the Open University’s <a href="http://futurelearn.com/">FutureLearn</a> project. We’re making steady progress and hopefully we’ll have some course organisers using the system for real in the not too distant future.</p>
          <h2 id="rebalancing-the-testing-pyramid">Rebalancing the Testing Pyramid</h2>
          <p>A <a href="/week-225">few weeks back</a>, I mentioned my concerns about how we’ve tended to organise our testing, particularly our <a href="http://cukes.info/">Cucumber</a> acceptance tests.</p>
          <h3 id="old-school">Old school</h3>
          <p>On a <a href="https://github.com/alphagov/whitehall/">previous project</a> we’d mainly used a mixture of traditional <a href="http://rubyonrails.org/">Rails</a> tests (unit & functional) and Cucumber scenarios. It felt that early in the project our testing stack became rather <em>top-heavy</em> with one or more scenarios being added for every story. Later in the project we tended to write more Rails functional tests.</p>
          <p>However, I often found myself wanting to write something “in-between”<sup id="fnref:1"><a class="footnote" href="#fn:1">1</a></sup>. A typical example of this is where you want to test the submission of a form and its validation errors. While it’s possible to do this in Rails functional tests to an extent, you tend to have to rely on setting realistic parameter values and so it’s not very satisfactory – not very integration-y.</p>
          <h3 id="new-school">New school</h3>
          <p>On our current project, we’re using <a href="http://rspec.info/">RSpec</a> and there’s no real equivalent of Rails functional tests – RSpec controller specs and view specs are unit tests; not integration-y at all. So to fill the gap we’ve decided to have a layer of RSpec feature tests loosely characterised like this:</p>
          <ul>
            <li>Only a few user interactions e.g. view a form, fill it in, submit it, and view the result</li>
            <li>Feel free to navigate directly to page via URL path i.e. no need to follow navigation links</li>
            <li>Use of factories, direct database access, etc. i.e. allow shortcuts in setup for test</li>
            <li>Detailed assertions about page content</li>
            <li>Exceptional/non-happy path</li>
          </ul>
          <p>While our Cucumber tests will typically be more like this:</p>
          <ul>
            <li>More than a couple of user interactions</li>
            <li>High-level description of the behaviour of the system</li>
            <li>Prefer to use actual navigation links like a user would</li>
            <li>Use the user interface to change state of the system as much as possible</li>
            <li>Only happy path</li>
          </ul>
          <p>The idea is to always be testing at the lowest <em>sensible</em> level in the <a href="http://martinfowler.com/bliki/TestPyramid.html">Testing Pyramid</a>. I think we still have some way to go before we figure out exactly what things we want to keep testing in Cucumber scenarios, but so far I’m happy with our direction of travel.</p>
          <h2 id="computation-book-club">Computation book club</h2>
          <p>James A <a href="http://lists.lrug.org/pipermail/chat-lrug.org/2013-May/008928.html">organised</a> the inaugural meeting of a reading group for Tom Stuart’s book, <a href="http://codon.com/computation-book">Understanding Computation</a>. Good work, James. The meeting at GFRHQ was <a href="http://lanyrd.com/2013/compbookclub/attendees/">very well attended</a> and took place in the illustrious company of the <a href="https://twitter.com/tomstuart">author</a> himself – you lucky people! If you’re interested in attending the next meeting, then please get in touch on the <a href="https://groups.google.com/forum/?fromgroups#!topic/computationbook/0DePgVcMP2I">mailing list</a>.</p>
          <h2 id="emigration">Emigration</h2>
          <p>Having jumped through all (?) of the bureaucratic hoops, <a href="/james-adam">Lazyatom HQ</a> will be relocating to Austin, Texas, later this month. Although we’ll miss having James around in person quite as much, I’m really glad he’ll be able to spend more time with his partner who is based out there.</p>
          <p>Hopefully some of our <a href="/week-228#home-and-away">remote-working gizmos</a> will help make it seem as if he’s just around the corner.</p>
          <p>Anyway, until next time.</p>
          <p>– James</p>
          <div class="footnotes">
            <ol>
              <li id="fn:1">
                <p>For some reason we never really went in for Rails integration tests.&nbsp;<a class="reversefootnote" href="#fnref:1">↩</a></p>
              </li>
            </ol>
          </div>
        </div>
        <div class="comments" id="comments">
          Disqus commenting is only enabled in production.
        </div>
      </div>
      <div id="article_links">
        <h3>Recent</h3>
        <div id="recent_articles">
          <ol class="blog_list" reversed="">
            <li value="6">
              <a href="/week-448-links">Week 448 - Interesting links</a>
            </li>
            <li value="5">
              <a href="/week-448">Week 448</a>
            </li>
            <li value="4">
              <a href="/week-445">Week 445</a>
            </li>
            <li value="3">
              <a href="/week-446">Week 446</a>
            </li>
            <li value="2">
              <a href="/week-447">Week 447</a>
            </li>
            <li value="1">
              <a href="/broken-rubyforge-urls">Broken Rubyforge URLs</a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <script src="/assets/application-a06a15e76d88968aa98de5792d639d527018444227ecda8004f3fb4a3e0d1d6f.js">
  </script> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45002715-1', 'gofreerange.com');
  ga('send', 'pageview');

  </script>
</body>
</html>
